# VUE
## 概述:
### 文件目录结构:
    src/main.js:加载各种公共的css,less,字体图标,组件,权限认证
    src/store/index.js:加载各种模块,实例化
    src/store/user.js:创建用户状态模块 
    src/config/routes.js:按需加载模块
    src/app.vue可以放置一些公共头部或底部 
	.vue文件:
			<template>:
			<script>:
			<style>:
	vue-router文件:
			路由,用来根据url跳转到具体的component
	Vues文件:
			用来保存全局变量
#### MVC
    MVC:Model/View/Controller
    Vue实例相当于一个Controller,用el绑定了一个Model,往Model中填充数据
    var t1 = new Vue({
        el:"",--------------------------------------------指定dom元素(需要加#)
        data:{xxx:""},--------------------------------为模型赋值
        methods:{},----------------------------------处理事件(method加s)
        filter:{},-----------------------------------------过滤数据,改变展示格式
        computed:{},--------------------------------对数据进行加减乘除
        watch:{},--------------------------------------监视数据,某一数据改变则改变其他数据
        
    })
##### 第一个vue页面:
```html
		<!DOCTYPE html>
		<html>
		
		<head>
			<meta charset="utf-8" />
			<title></title>
			<script src="js/vue.js"></script><!--注意必须是两个script标签,不能省略成为<script src="js/vue.js"/>-->
		</head>
		
		<body>
			<div id="app">
				{{ message }}
			</div>
			<!-- 指令前带有v-前缀, v-bind属性作用是将titlt属性与Vue实例的message属性绑定到一起-->
			<div id="app-2">
				<span v-bind:title="message">Hover your mouse over me for a few seconds</span>
			</div>
			<!-- 控制切换一个元素的显示与隐藏 -->
			<div id="app-3">
				<p v-if="seen">Now you see me</p>
			</div>
			<!-- v-for指令用来将数据数组渲染到列表中 -->
			<div id="app-4">
				<ol>
					<li v-for = "todo in todos">
						{{todo.text}}
					</li>
				</ol>
			</div>
			<!-- v-on监听用户动作进行互动 -->
			<div id="app-5">
				<p>{{message}}</p>
				<button v-on:click="reverseMessage">Reverse Message</button>
			</div>
			<!-- v-model指令将表单输入与应用状态做双向数据绑定 -->
			<div id="app-6">
				<p>{{message}}</p>
				<input v-model="message">
			</div>
			
			<script>
				var app = new Vue({
					el: '#app',
					data: {
						message: 'Hello Vue!'
					}
				})
				var app2 = new Vue({
					el:"#app-2",
					data:{
						message:'You loaded this page on ' +new Date()
					}
				})
				var app3 = new Vue({
					el:'#app-3',
					data:{
						seen:false//切换到true就能看到
					}
				})
				var app4=new Vue({
					el:'#app-4',
					data:{
						todos:[
							{text:'Learn JavaScript'},
							{text:'Learn Vue'}
						]
					}
				})
				var app5 = new Vue({
					el:'#app-5',
					data:{
						message:'Hello Vue.js!'
					},
					methods:{
						reverseMessage:function(){
							this.message = this.message.split('').reverse('').join('')
						}
					}
				})
				var app6 = new Vue({
					el:'#app-6',
					data:{
						message:'HelloVue'
					}
				})
				
			</script>
		</body>
		
		</html>
```
#####       条件渲染
    v-if/v-else-if/v-else:
```html
		<body>
    <div id="myApp">
        <h1 v-if="result == 0">成绩未公布</h1>
        <h1 v-else-if="result < 60">{{result}}分 - 考试不及格</h1>
        <h1 v-else-if="result <80">{{result}}分 - 还需努力</h1>
        <h1 v-else>{{result}}分 - 优秀</h1>
        <button @click="btnClick">考试成绩</button>
    </div>
    <script>
        var myApp = new Vue({
            el:"#myApp",
            data:{
                result:0
            },
            methods:{
                btnClick:function () {
                    this.result = Math.round(Math.random()*100)
                }
            }
        })
    </script>
```
		
#####        列表渲染
    v-for:循环一个数组
    demo:
```html
                <ul id="example-1">   <!--ul是有序列表ol是无序列表-->
                    <li v-for="item in items">    
                        {{ item.message }}  
                    </li> 
                </ul>
                var example1 = new Vue({  
                el: '#example-1',  
                data: {    
                items: [      
                {message: 'foo' },      
                {message: 'Bar' }    ]  
                }})
```
      其中:of可以替代in作为分隔符
                 

#####  v-model处理输入框输入
v-model:绑定一个模型,script中已经为模型赋值,输入框优先级大于默认模型值
```html
    <div id="myApp">
        <p>您最喜欢的游戏是:{{mygame}}</p>
        <input v-model="mygame">
    </div>
    <script>
        var myApp = new Vue({
            el:"#myApp",
            data:{
                mygame:'超级马里要奥'
            }
        })
    </script>
```
#####  v-on绑定事件
```html
<body>
    <div id="myApp">
    <h1>事件处理器</h1>
        <!--键盘按下事件,入参需要用$表示-->
        <input id="textName" v-on:keyup="txtKeyup($event)">
        <!--按下按钮事件-->
        <button id="btnOK" v-on:click="btnClick($event)">OK</button>
    </div>
        <script>
            var myApp = new Vue({
            el:"#myApp",
            data:{},
                methods:{
                txtKeyup:function(event){
                    this.debugLog(event);
                },
                    btnClick:function(event){
                    this.debugLog(event);
                    },
                    debugLog:function(event){
                    console.log(
                        event.srcElement.tagName,
                        event.srcElement.innerHTML,
                        event.key
                        )
                    }
            }
            })
        </script>
</body>
```
		
##### 组件	
	作用:封装DOM标签
	语法:
	        定义:Vue.component(tagName,options)
	        调用:<tagName></tagName>
	全局组件示例:
```html
	  	<body>
	      <div id="myApp">
	              <today-weather></today-weather>
	      </div>
	      <script>
	          Vue.component("today-weather",{
	              template:'<div>下雨</div>'
	          });
	          /*先写component,再注册vue*/
	          var myApp = new Vue({
	              el:'#myApp'
	          })
	      </script>
	  </body>
```
	局部组件示例:
```html
		<body>
		<div id="myApp">
						<today-weather></today-weather>
		</div>
		<script>
				/*之前在Vue.component中注册的是全局*/
				var WeatherComponent = {
						template:'<div>下雨</div>'
				}
				var myApp = new Vue({
						el:'#myApp',
						data:{},
						components:{
								'today-weather':WeatherComponent
						}
				})
		</script>
	</body>
```
     父子组件:
        使用props向下传递数据,使用events向上传递数据
	Props示例:
```html
	<!--
	特点:
    #1 父类组件为子类组件(含有原生html标签)赋值,需要在子类组件中多写一个属性,同时子类组件要显式声明一个同名属性,且与模型名一致-->
<div id="myApp">
    <parent></parent>
      </div>
      <script>
        var v_child = {
					template:"<div>{{message}}</div>",
					props:["message"]
                     }
        var v_parent = {
          template:"<div class='parent'> <child message='aa'></child></div>",
          components:{
                        "child":v_child
                    }
                }
        //创建一个vue实例
        new Vue({
            el:"#myApp",
            components:{
                "parent":v_parent
                    }
          })
    </script>
```
	    父类组件省略不声明的写法:
```html
	    <div id="myApp">
               <child message="hello"></child>
           </div>
            <script>
                var v_child = {
                    template:"<div>{{message}}</div>",
                    props:["message"]
                }
                new Vue({
                    el:"#myApp",
                    components:{
                        "child":v_child
                    }
                })
```
     动态Props示例:
     
#####    过滤器filter
        过滤某类数据用新的格式展示
        <div id="myApp">
               <p>{{message}}</p>
               <p>{{message | toupper}}</p>
               <p>进度是{{num}}({{num|topercentage}})</p>
           </div>
            <script>
                var myApp = new Vue({
                    el:"#myApp",
                    data:{
                        message:"hello world",
                        num:0.3
                    },
                    filters:{
                       toupper:function(value){
                           return value.toUpperCase();
                       },
                        topercentage:function(value){
                           return value*100+"%";
                        }
                    }
                })
            </script>filter
##### 计算属性computed
            处理元数据(加减乘除),便于二次开发
          <div id="myApp">
                 价格是:{{prtice}},含税价格是:{{priceInTax}}
             </div>
              <script>
                  var myApp = new Vue({
                      el:"#myApp",
                      data:{
                          price:300
                      },
                      computed:{
                          priceInTax:function(){
                              return this.price*1.08
                          }
                      }
                  })
              </script>            
#####   观察某属性watch
```html
            <div id="myApp">
                   价格是:{{price}},含税价格是:{{priceInTax}}<br>
                   <button @click="btnClick(50)">加价50</button>
               </div>
                <script>
                    var myApp = new Vue({
                        el:"#myApp",
                        data:{
                            price:300
                        },
                        computed:{
                            priceInTax:function(){
                                return this.price*1.08
                            }
                        },
                        watch:{
                                price:function(newVal,oldVal){
                                    this.priceInTax = Math.round(this.price*1.08)/*相当于监视,发生变化就执行computed的功能*/
                                }
                        },
                        methods:{
                            btnClick:function(val){
                                this.price += val;
                            }
                        }
                    })
                </script>
```
#####   设置计算属性
```html
    <div id="myApp">
            价格是:{{price}},含税价格是:{{priceInTax}}<br>
            <button @click="btnClick(200)">改变价格为200</button>
        </div>
        <script>
            var myApp = new Vue({
                el:"#myApp",
                data:{
                    price:300
                },
                computed:{
                    priceInTax:{
                        get:function(){
                            return this.price*1.08;
                        },
                        set:function(val){/*这里不能设置this.priceInTax.因为get目的是赋值给priceInTax,set的目的是将priceInTax赋值给其他*/
                            this.price=val;
                        }
                    }
                },
                methods:{
                    btnClick:function(val){
                        this.priceInTax = val;
                    }
                }
            })
        </script>
```
##### 绑定css属性
```html
<body>
<!--
原生:<div class="{active}">红色文本1</div><!--在css文件中的.active{}代表就是active变量-->
vue:<div v-bind:class="{active}">红色文本1</div>
-->
<div id="myApp">
    <div v-bind:class="{active:isActive}">红色文本1</div>
    <div :class="{active:isActive}">红色文本2</div><!--是上一句的缩略写法-->
    <button @click="btnClick">改变class吧</button>
</div>
    <script>
        var myApp = new Vue({
          el:"#myApp",
           data:{
               isActive:true/*isActive是标准的data属性*/
           },
            methods:{
              btnClick:function(){
                  this.isActive = false;
              }
            }
        })
    </script>
</body>
```
css文件:
body{
    font-size: 24px;
}
.active{
    color:red;
}

##### class对象绑定
```html
<body>
    <div id="myApp">
        <!--:class后面可以是link指代的css文件,也可以是link指代的css中的一个属性-->
        <div :class="myClass1">红色文本</div>
        <button @click="btnClick">改变class吧</button>
    </div>
    <script>
        var myApp = new Vue({
            el:"#myApp",
            data:{
                myClass1:{
                    active:true,
                    big:true,
                },
            },
            methods:{
                btnClick:function () {
                    this.myClass1.big=!this.myClass1.big;/*反转*/
                }
            }
        })
    </script>
</body>
```
css文件:
body{
    font-size: 24px;
}
.active{
    color:red;
}	
.big{
    font-weight:bolder;
    font-size:64px;
}
	
##### JS对象迭代v-for
```html
<body>
<div id="myApp">
   <h1>JS对象迭代</h1>
    <div v-for="(value,key) in mygame">{{key}} : {{value}}</div>
</div>
    <script>
        var myApp = new Vue({
          el:"#myApp",
           data:{
                    mygame:{
                        title:"sc2",
                        price:198,
                        category:"mpg"
                    }
           }
        })
    </script>
</body>
```
##### v-model表单控件绑定
表单控件绑定就是文本中有一个模型名,在script中可以装填数据,但是可以用一个输入框也来给模型装填数据
```html
<body>
<div id="myApp">
  <h1>表单控件绑定</h1>
    <!--v-model绑定的是一个变量-->
    <input type="text" v-model="message" placeholder="编辑区">
    <p>Message is {{ message }}</p>
</div>
    <script>
        var myApp = new Vue({
          el:"#myApp",
           data:{
              message:"中国"
           },
           }
        )
    </script>
</body>
```
##### 表单复选框
```html
	<div id="myApp">
        <input type="checkbox" id="生化危机"  value="生化危机" v-model="checkedGames">
       <label for="生化危机" >生化危机</label>
        <input type="checkbox" id="模拟飞行" value="模拟飞行" v-model="checkedGames">
        <label for="模拟飞行" >模拟飞行</label>
        <br>
        <p>您选择的游戏是:{{checkedGames}}</p>
   </div>
        <script>
            var myAppppp = new Vue({
                el:'#myApp',
                data:{
                    checkedGames:[]
                },
                methods:{}
            })
        </script>
```
##### 表单单选框
```html
<div id="myApp">
       <h3>选择性别</h3>
       <input type="radio" id="male" value="男" v-model="pickedSex">
       <label for="male">男</label>
       <br>
       <input type="radio" id="female" value="女" v-model="pickedSex">
       <label for="male">女</label>
       <br>
       <h3>选择结果: {{pickedSex}}</h3>
   </div>
        <script>
            var myAppppp = new Vue({
                el:'#myApp',
                data:{
                    pickedSex:""
                },
                methods:{}
            })
        </script>
```
##### 表单下拉框
```html
	<body>
    <div id="myApp">
        <h3>球星</h3>
        <select v-model="likedNBAStar" style="width: 210px">
            <option>科比</option>
            <option>韦德</option>
        </select>
        <h3>选择结果</h3>
        <p>我最喜欢:{{likedNBAStar}}</p>
    </div>
    <script>
        var myApp = new Vue({
            el:"#myApp",
            data:{
                likedNBAStar:null
            },
            methods:{
            }
        })
    </script>
</body>
```
##### 表单修饰符(.lazy   .number     .trim)
      .lazy:懒加载,输入内容时不动态更新,全部输入完成再做绑定,提高效率
			.number:规范输入内容为数值,输入不正确则返回空
			.trim:去掉空格
```html
				<body>
			<div id="myApp">
					<div>
							<label for="username">用户:</label>
							<input type="text" id="username" v-model.lazy="username" @change="checkUsername"><!--如果发生变化就触发checkUsername事件-->
							<span v-if="checkUsernameOK">可注册</span><!--如果checkUsernameOK为true,就显示可注册-->
					</div>
					<div>
							<label for="age">年龄:</label>
							<input v-model.number="age"  id="age" type="number">
					</div>
					<div>
							<label for="content">个人见解:</label>
							<textarea id="content" v-model.trim="content" cols="55" rows="8"></textarea>
					</div>
					<h4>信息区</h4>
					<p>姓名:{{username}}</p>
					<p>年龄:{{age}}</p>
					<p><pre>个人见解:{{content}}</pre></p>
			</div>
			<script>
					var myApp = new Vue({
							el:"#myApp",
							data:{
									username:"",
									checkUsernameOk:false,
									age:"",
									content:""
							},
							methods:{
									checkUsername:function () {
																	if (this.username.length >0){
																			this.checkUsernameOK = true;
																	}else {
																			this.checkUsernameOK=false;
																	}
									}
							}
					})
			</script>
	</body>
```
##### 表行组件
  错误示范:
```html
	 <body>
    <div id="myApp">
            <h1>游戏列表:</h1>
            <table boder="1">
                <tr>
                    <td>编号</td>
                    <td>名称</td>
                </tr>
                <my-row1></my-row1>
                <my-row2></my-row2>
            </table>

    </div>
    <script>
        Vue.component('my-row1',{
            template:'<tr><td>(1)</td><td>lol</td></tr>'
            }
        )
        Vue.component('my-row2',{
                template:'<tr><td>(2)</td><td>SC2</td></tr>'
            }
        )
        var myApp = new Vue({
            el:'#myApp',
            data:{},
           methods:{}
        })
    </script>
</body>
```
	错误原因是h5规范中的table中必须是tr不能是其它标签
	改正后应该为:
		<tr is="my-row1"></tr>
    <tr is="my-row2"></tr>
##### 组件中的数据函数,为自定义的组件添加变量
     用数据属性会报错:
```html
		<body>
			<div id="myApp">
							<div>今天的天气是:<today-weather/></div>
			</div>
			<script>
					Vue.component('today-weather',{
							template:'<strong>{{weatherdata}}</strong>',
							data: {
									weatherdata:'雨加雪'
							}
							})
					var myApp = new Vue({
							el:'#myApp',
							data:{},
						 methods:{}
					})
			</script>
		</body>	
```
	data是一个属性而不是一个对象,正确的是:
```html
		<body>
			<div id="myApp">
							<div>今天的天气是:<today-weather/></div>
			</div>
			<script>
					Vue.component('today-weather',{
							template:'<strong>{{weatherdata}}</strong>',
							data: function () {
									return {
											weatherdata: '雨加雪'
									};
							}
							})
					var myApp = new Vue({
							el:'#myApp',
							data:{},
						 methods:{}
					})
			</script>
		</body>
```
##### 组件-传递数据,可接收参数的组件
```html
	<body>
		<div id="myApp">
			<h1>成绩:</h1>
			<test-result :score="50"></test-result>
			<test-result :score="100"></test-result>
		</div>
		<script>
			Vue.component('test-result',{
				props:['score'],
				template:"<div><strong>{{score}}分,{{testResult}}</strong></div>",
				computed:{
					testResult:function(){
						var strResult = "";
						if (this.score<60){
							strResult="不及格"
						} else{
							strResult="优秀"
						}
							return strResult;
					}
				}
			});
			var myApp = new Vue({
				el:'#myApp',
				data:{},
				methods:{}
			})
		</script>
	</body>
```
##### 组件-参数验证  
```html
	<body>
    <div id="myApp">
        <h1>身世之谜</h1>
         <show-member-info name="koma" :age="25" :detail="{address:'earth',language:'世界语'}"></show-member-info>
    </div>
    <script>
        Vue.component('show-member-info',{
            props:{
                name:{
                    type:String,
                    required:true
                },
                age:{
                    type:Number,
                    validator:function (value) {
                        return value >= 0 && value <=130
                    }
                },
                detail:{
                    type:Object,
                    default:function () {
                        return {
                            address:'us',
                            language:'English'
                        }
                    }
                }
            },
            template:"<div>姓名:{{this.name}}</br>"
            +"年龄:{{this.age}}岁<br>"
            +"地址:{{this.detail.address}}<br>"
            +"语言:{{this.detail.language}}</div>"
            });
        var myApp = new Vue({
            el:'#myApp',
            data:{},
           methods:{}
        })
    </script>
</body>	
```
##### 组件之事件传递v-on与$emit
    侦听组件事件,当组件触发事件后进行事件处理
~~~html
    
~~~





	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
                
	
	
	
	
	
	
